

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>ALS11012 PRSoXR loader &mdash; p-RSoXR 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/thebelab.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/thebelab-helper.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Modeling/Fitting with PyPXR:" href="../DataModeling_home.html" />
    <link rel="prev" title="Reducing data to 1D profiles:" href="../DataReduction_home.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> p-RSoXR
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Software Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DataCollection_home.html">Tutorial on Collecting Data:</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../DataReduction_home.html">Reducing data to 1D profiles:</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">ALS11012 PRSoXR loader</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Loading-your-data">Loading your data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Check-individual-scans">Check individual scans</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Saving-Data">Saving Data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../DataModeling_home.html">Modeling/Fitting with PyPXR:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references_home.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../legal.html">NIST Legal</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">p-RSoXR</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../DataReduction_home.html">Reducing data to 1D profiles:</a> &raquo;</li>
        
      <li>ALS11012 PRSoXR loader</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/source/DataReduction/ALSload_Tutorials.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="ALS11012-PRSoXR-loader">
<h1>ALS11012 PRSoXR loader<a class="headerlink" href="#ALS11012-PRSoXR-loader" title="Permalink to this headline">¶</a></h1>
<p>This tutorial will guide you toward importing your newly aquired p-RSoXR data using the <code class="docutils literal notranslate"><span class="pre">ALS_PRSoXR_Loader</span></code>. The data can either be exported as a .csv file or the entire dataset can be compiled into an hdf5 file for a more complete meta-data friendly experience.</p>
<p>The first step will be to sort your newly acquired data. The provided utilities draw all files within a single directory and assume they belong to the same reflectivity curve. In the following example, the data has been sorted into directories by sample/polarization/energy.</p>
<div class="section" id="Loading-your-data">
<h2>Loading your data<a class="headerlink" href="#Loading-your-data" title="Permalink to this headline">¶</a></h2>
<p>The following packages are required for loading data</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pathlib</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;../../../src/PyPXR/&quot;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">prsoxr_loader</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
<p>The first step to reduce data with this tool is to create a list that contains a path to each .fits file.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">path_s</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;../../../src/PyPXR/example_data/MF201/&#39;</span><span class="p">)</span>
<span class="n">files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">path_s</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*fits&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">files</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span> <span class="c1">#Look at the first 5 files.</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[WindowsPath(&#39;../../../src/PyPXR/example_data/MF201/MFSeries_spol_67235-01744.fits&#39;),
 WindowsPath(&#39;../../../src/PyPXR/example_data/MF201/MFSeries_spol_67235-01746.fits&#39;),
 WindowsPath(&#39;../../../src/PyPXR/example_data/MF201/MFSeries_spol_67235-01747.fits&#39;),
 WindowsPath(&#39;../../../src/PyPXR/example_data/MF201/MFSeries_spol_67235-01748.fits&#39;),
 WindowsPath(&#39;../../../src/PyPXR/example_data/MF201/MFSeries_spol_67235-01749.fits&#39;)]
</pre></div></div>
</div>
<p>Note that the files don’t start at ‘00001’. These have been separated from a longer multiple-sample scan.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">PrsoxrLoader</span></code> is used to bring the entire dataset into memory.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">loader</span> <span class="o">=</span> <span class="n">PrsoxrLoader</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;MF201_spol_250eV&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Variables used in reducing the data can be found by printing the new loader object</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">loader</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Sample Name - MF201_spol_250eV
Number of scans - 400
______________________________
Reduction Variables
______________________________
Shutter offset = 0.00389278
Sample Location = 0
Angle Offset = 0.374
Energy Offset = 0
SNR Cutoff = 1.01
______________________________
Image Processing
______________________________
Image X axis = 200
Image Y axis = 200
Image Edge Trim = (5, 5)
Dark Calc Location = LHS
Dizinger Threshold = 10
Dizinger Size = 3
</pre></div></div>
</div>
<p>We can note a few things about this dataset:</p>
<ol class="arabic simple">
<li><p>It contains 402 images that need to be reduced</p></li>
<li><p>The sample was mounted on the top of the sample plate (Sample Location = 0)</p></li>
<li><p>The Angle Offset is automatically determined to be 0.375</p></li>
<li><p>A dark frame will be created on the ‘left hand side’ of the image</p></li>
</ol>
<p>All other parameteres can be set by the user depending on their prefered settings. See the API for a full list of variables and how they are used in the reduction.</p>
</div>
<div class="section" id="Check-individual-scans">
<h2>Check individual scans<a class="headerlink" href="#Check-individual-scans" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">PrsoxrLoader.check_spot()</span></code> utility will allow you to quickly view single scans.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">a</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">check_spot</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Exposure: 0.00100000004749745
Beam Current: 0.0
Angle Theta: 0.624
T-2T: 0.624
CCD Theta: 1.999
Photon Energy: 249.996035379532
Polarization: 100.0
Higher Order Suppressor: 11.9997548899767
Horizontal Exit Slit Size: 100.0


Processed Variables:
Q: 0.002759278437786943
Specular: 739774
Background: 173296
Signal: 566478
SNR: 4.268846366909796
Beam center (82, 54)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/source_DataReduction_ALSload_Tutorials_16_1.png" src="../../_images/source_DataReduction_ALSload_Tutorials_16_1.png" />
</div>
</div>
<p>This allows us to get a feel for the beamshape, data quality, and important motor positions. The 4 displayed images are, from left to right:</p>
<ol class="arabic simple">
<li><p>Raw CCD Image, no corrections</p></li>
<li><p>CCD image passed through a median filter (for locating beamspot)</p></li>
<li><p>The beamspot determined by the maximum intensity pixel (black box in image 1)</p></li>
<li><p>The dark frame that will be used for background subtraction (red box in image 1)</p></li>
</ol>
<p>The ROI is determined by adjusting the <em>h</em> and <em>w</em> attributes. Adjust the ROI until you fully encompass the beam shape, using <code class="docutils literal notranslate"><span class="pre">PrsoxrLoader.check_spot()</span></code> to confirm.</p>
<p>Once you have decided on an ROI, you can reduce the data by calling the loader.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">refl</span> <span class="o">=</span> <span class="n">loader</span><span class="p">(</span><span class="n">h</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The output is a pandas dataframe, we can easily review the data by plotting it. It will also be stored locally in <code class="docutils literal notranslate"><span class="pre">PrsoxrLoader.refl</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">refl</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Q&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yscale</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/source_DataReduction_ALSload_Tutorials_21_0.png" src="../../_images/source_DataReduction_ALSload_Tutorials_21_0.png" />
</div>
</div>
<p>Oh no! Something odd is happening to our data at higher angles! This inflection around Q=0.17 is not a typical behavior of reflectivity, something may have gone wrong in the processing.</p>
<p>Lets review these higher angles using our <code class="docutils literal notranslate"><span class="pre">check_spot</span></code> function.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">a</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">check_spot</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Exposure: 1.0
Beam Current: 0.0
Angle Theta: 59.012
T-2T: 59.012
CCD Theta: 118.0235
Photon Energy: 250.001638213888
Polarization: 100.0
Higher Order Suppressor: 7.50014446251372
Horizontal Exit Slit Size: 1000.0


Processed Variables:
Q: 0.2172012852730185
Specular: 329467
Background: 328126
Signal: 1341
SNR: 1.0040868446877114
Beam center (15, 135)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/source_DataReduction_ALSload_Tutorials_23_1.png" src="../../_images/source_DataReduction_ALSload_Tutorials_23_1.png" />
</div>
</div>
<p>It looks like the beamspot drifts toward the left edge of the image, it is likely tilted on the sample mount. We can see that this causes the light and dark frames to overlap which artifically reduces the intensity. We can adjust the side of the camera that generates a dark frame by updating the <code class="docutils literal notranslate"><span class="pre">PrsoxrLoader.dark_side</span></code> parameter.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">loader</span><span class="o">.</span><span class="n">darkside</span> <span class="o">=</span> <span class="s1">&#39;RHS&#39;</span>
</pre></div>
</div>
</div>
<p>Lets check the data again,</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">refl</span> <span class="o">=</span> <span class="n">loader</span><span class="p">(</span><span class="n">h</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">refl</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Q&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yscale</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/source_DataReduction_ALSload_Tutorials_27_0.png" src="../../_images/source_DataReduction_ALSload_Tutorials_27_0.png" />
</div>
</div>
<p>Much better! The dataset looks good and is ready to be exported.</p>
</div>
<div class="section" id="Saving-Data">
<h2>Saving Data<a class="headerlink" href="#Saving-Data" title="Permalink to this headline">¶</a></h2>
<p>Several options exist for saving data.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">loader.to_csv(path,</span> <span class="pre">name,</span> <span class="pre">save_meta=True)</span></code> : This option will save the reflectivity (and meta data) into two .csv. files at the location ‘path’ with the filename ‘name.csv’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">loader.to_hdf5(path,</span> <span class="pre">name,</span> <span class="pre">save_images=False)</span></code> : This option will save the reflectivity (and meta data) into a composite .hdf5 file at the location ‘path’ under the filename ‘name.hdf5’</p></li>
</ul>
<p>The .csv options provides a much simpler user experience for saving/accessing your data outside of python. The .hdf5 file allows you to compile multiple scans into a single file. Additionally, with <code class="docutils literal notranslate"><span class="pre">save_images=True</span></code> every processed image is saved under the <code class="docutils literal notranslate"><span class="pre">meta_data</span></code> umbrella. This will also save the variables used to process the data if you want to review at a later time.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Saving data in the same folder as this workbook.</span>
<span class="n">loader</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Samp1_En250_Pol100&#39;</span><span class="p">,</span> <span class="n">save_meta</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># A .csv file for every energy and polarization</span>
<span class="n">loader</span><span class="o">.</span><span class="n">to_hdf5</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Samp1&#39;</span><span class="p">,</span> <span class="n">save_images</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># A single file per sample that sorts by energy and polarization</span>
</pre></div>
</div>
</div>
<p>Your data is now ready to be modeled with <code class="docutils literal notranslate"><span class="pre">PyPXR</span></code></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../DataModeling_home.html" class="btn btn-neutral float-right" title="Modeling/Fitting with PyPXR:" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../DataReduction_home.html" class="btn btn-neutral float-left" title="Reducing data to 1D profiles:" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright : Official Contribution of the US Government.  Not subject to copyright in the United States..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>